# MCP Tool: Query DynamoDB table
#
# Prerequisites:
# 1. Configure AWS connector in connectors/aws.graphql
# 2. Set up IAM permissions for DynamoDB access
# 3. Update table name and query parameters
#
# Learn more: apollographql.com/docs/connectors/aws

query QueryUserSubmissions($userId: String!) {
  """
  Queries DynamoDB for user submissions.
  Replace with your own table and attributes.
  """
  getUserSubmissions(userId: $userId) @connect(
    source: "aws"
    http: {
      POST: "https://dynamodb.us-east-1.amazonaws.com/"
      headers: [{
        name: "Content-Type"
        value: "application/x-amz-json-1.0"
      }, {
        name: "X-Amz-Target"
        value: "DynamoDB_20120810.Query"
      }]
      body: {
        TableName: "{{TABLE_NAME}}"
        KeyConditionExpression: "userId = :userId"
        ExpressionAttributeValues: {
          ":userId": { S: "{{$userId}}" }
        }
      }
    }
  ) {
    items {
      submissionId
      title
      status
      createdAt
    }
    count
  }
}