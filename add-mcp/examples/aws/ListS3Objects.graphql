# MCP Tool: List S3 bucket objects
#
# Prerequisites:
# 1. Configure AWS S3 permissions
# 2. Update bucket name
# 3. Adjust prefix and filters as needed
#
# Learn more: apollographql.com/docs/connectors/aws

query ListS3Objects($bucket: String!, $prefix: String, $maxKeys: Int = 100) {
  """
  Lists objects in an S3 bucket with optional prefix filtering.
  Useful for file browsing and content management.
  """
  listS3Objects(bucket: $bucket, prefix: $prefix, maxKeys: $maxKeys) @connect(
    source: "aws"
    http: {
      GET: "https://{{$bucket}}.s3.amazonaws.com/?list-type=2&prefix={{$prefix}}&max-keys={{$maxKeys}}"
    }
  ) {
    objects {
      key
      size
      lastModified
      storageClass
    }
    isTruncated
    nextToken
  }
}